{{ $gcp_cloudshell_url := .Param "gcp_cloudshell_url" }}
{{ $git_repo_url := .Param "sandboxes_git_repo_url" }}
{{ $sandbox_url := printf "%s&cloudshell_git_repo=%s" $gcp_cloudshell_url $git_repo_url }}

{{ $sandbox_gke_anthos_demo_app := .Param "sandbox_gke_anthos_demo_app" }}
{{ $sandbox_gke_demo_app := .Param "sandbox_gke_demo_app" }}
{{ $sandbox_gke := .Param "sandbox_gke" }}
{{ $sandbox_php_web_server := .Param "sandbox_php_web_server" }}
{{ $sandbox_cloud_sql := .Param "sandbox_cloud_sql" }}
{{ $sandbox_cloud_composer := .Param "sandbox_cloud_composer" }}

{{ $gke_antons_demo_app_url := printf "%s&cloudshell_tutorial=%s" $sandbox_url $sandbox_gke_anthos_demo_app }}
{{ $gke_demo_app_url := printf "%s&cloudshell_tutorial=%s" $sandbox_url $sandbox_gke_demo_app }}
{{ $gke_url := printf "%s&cloudshell_tutorial=%s" $sandbox_url $sandbox_gke }}
{{ $php_web_server_url := printf "%s&cloudshell_tutorial=%s" $sandbox_url $sandbox_php_web_server }}
{{ $cloud_sql_url := printf "%s&cloudshell_tutorial=%s" $sandbox_url $sandbox_cloud_sql }}
{{ $cloud_composer_url := printf "%s&cloudshell_tutorial=%s" $sandbox_url $sandbox_cloud_composer }}

{{ $gke_antons_demo_app_text := "GKE cluster with Anthos Service Mesh and Demo application" }}
{{ $gke_demo_app_text := "GKE cluster with Demo application" }}
{{ $gke_text := "Just GKE cluster" }}
{{ $php_web_server_text := "VM based Web server with PHP and Wordpress" }}

<section class="tab-content">
    <div class="columns is-desktop">
        <div class="column instruction">
            <h1 class="subtitle has-text-black">How to deploy a Sandbox Environment</h1>
            <p class="mb-5">
                <span>Sign in to your GCP account using </span>
                <a href="https://console.cloud.google.com/" target="_blank">
                    Google Cloud Platform web console.
                </a>
                <span> If you have a </span>
                <a href="https://cloud.google.com/shell" target="_blank">
                    Cloud Shell
                </a>
                <span> session running, clicking the button will restart it.</span>
            </p>

            <h1 class="subtitle has-text-black">Available Sandboxes</h1>

            <p class="mb-2" class="has-text-black">
                GKE cluster with Demo application
            </p>
            <p class="mb-5">
                <a class="button is-black" target="_blank" href="{{ $gke_demo_app_url }}">
                    <span class="icon is-small">
                        <i class="fas fa-terminal" aria-hidden="true"></i>
                    </span>
                    <span>Deploy GKE + Demo App</span>
                </a>
            </p>

            <p class="mb-2" class="has-text-black">
                GKE cluster with Anthos Service Mesh and Demo application
            </p>
            <p class="mb-5">
                <a class="button is-black" target="_blank" href="{{ $gke_antons_demo_app_url }}">
                    <span class="icon is-small">
                        <i class="fas fa-terminal" aria-hidden="true"></i>
                    </span>
                    <span>Deploy GKE + ASM + Demo App</span>
                </a>
            </p>

            <p class="mb-2" class="has-text-black">
                Just GKE cluster
            </p>
            <p class="mb-5">
                <a class="button is-black" target="_blank" href="{{ $gke_url }}">
                    <span class="icon is-small">
                        <i class="fas fa-terminal" aria-hidden="true"></i>
                    </span>
                    <span>Deploy empty GKE cluster</span>
                </a>
            </p>

            <p class="mb-2" class="has-text-black">
                Web Server VM with SQL Server
            </p>
            <p>
                <a class="button is-black" target="_blank" href="{{ $php_web_server_url }}">
                    <span class="icon is-small">
                        <i class="fas fa-terminal" aria-hidden="true"></i>
                    </span>
                    <span>Deploy Web Server VM + Cloud SQL</span>
                </a>
            </p>

            <br>
            <br>
            <p class="mb-2" class="has-text-black">
                Cloud SQL instance with k6.io load test
            </p>
            <p>
                <a class="button is-black" target="_blank" href="{{ $cloud_sql_url }}">
                    <span class="icon is-small">
                        <i class="fas fa-terminal" aria-hidden="true"></i>
                    </span>
                    <span>Deploy Cloud SQL + Load Test</span>
                </a>
            </p>

            <br>
            <br>
            <p class="mb-2" class="has-text-black">
                Cloud Composer with a sample ETL pipeline to move data from Cloud Storage to BigQuery
            </p>
            <p>
                <a class="button is-black" target="_blank" href="{{ $cloud_composer_url }}">
                    <span class="icon is-small">
                        <i class="fas fa-terminal" aria-hidden="true"></i>
                    </span>
                    <span>Deploy Composer + BigQuery</span>
                </a>
            </p>
            <br>
            <br>
            <h1 class="subtitle has-text-black">Quick Start</h1>
            {{ partial "content/install/gcp/tools-info-centos.html" . }}
            <textarea id="linux-gcp"></textarea>
            <pre id="linux-bash-instruction" class="my-1">{{ partial "content/install/gcp/deploy.html" . }}</pre>
        </div>
    </div>
</section>
